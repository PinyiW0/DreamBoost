import{_ as u,o as h,c as p,a as e,f as d,e as _,b,u as i,B as m,D as g,d as x}from"./index-2e5bzb_o.js";import{m as y}from"./mixinFullScreenLoading-9dNja2ki.js";import{m as I}from"./mixinSwalToast-BK7EWvli.js";const v={},w={style:{"margin-bottom":"2px"},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-cloud-arrow-up-fill",viewBox:"0 0 16 16"},k=e("path",{d:"M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2m2.354 5.146a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0z"},null,-1),U=[k];function E(o,t){return h(),p("svg",w,U)}const M=u(v,[["render",E]]);var T={VITE_URL:"https://api-dreamboost.vercel.app",VITE_WEIKEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3RlbWFpbEBnbWFpbC5jb20iLCJ1c2VySUQiOiIzYTU4MjBhZi1iN2JlLTRkODMtOWM2My1kNmY1MWI2YmExMDEiLCJpYXQiOjE3MDg5Mzk5MDcsImV4cCI6MTcxMTUzMTkwN30.BbIXGVkQOU2HqsiCg6UcwFZx-kBd7kdOP24kUD21c1M",BASE_URL:"/DreamBoost/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:l}=T,$={components:{UpLoad:M},data(){return{userMail:"",placeholderText:"abc@mail.com",userInfo:{userTelephone:"09123456789",userGender:"",userAvatarImage:"",userBirthday:"",customizeProperty:{contactEmail:""}}}},mixins:[y,I],mounted(){this.showFullScreenLoading(),this.checkUser(),this.getUserData(),setTimeout(()=>{this.hideFullScreenLoading()},1500)},methods:{checkUser(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)db\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=o,this.$http.post(`${l}/dreamboost/checktoken`).then(t=>{t.data.success&&(this.userMail=t.data.data.result.username)}).catch(()=>{this.$router.push({name:"member"})})},userUploadImage(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)db\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=o;const t=document.createElement("input");t.type="file",t.style.display="none",t.addEventListener("change",c=>{const n=c.target.files[0],s=new FormData;s.append("image",n),this.$http.post(`${l}/dreamboost/upload`,s,{Authorization:o}).then(a=>{a.data.success&&(this.userInfo.userAvatarImage=a.data.data.result,this.addToast({content:"修改成功",timer:2e3}))}).catch(a=>{throw new Error(a)})}),t.click()},updateUserProfile(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)db\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=o,this.$http.post(`${l}/dreamboost/user/normal/userprofile`,this.userInfo).then(t=>{t.data.success?this.addToast({content:"修改成功",timer:2e3}):this.addToast({content:"更新使用者資料失敗",timer:2e3})}).catch(t=>{throw new Error(t)})},getUserData(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)db\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=o,this.$http.get(`${l}/dreamboost/user/normal/userprofile`).then(t=>{t.data.success?(this.userInfo=t.data.data.result,this.userInfo.customizeProperty?this.addToast({content:"取得使用者資料成功",timer:2e3}):(this.userInfo.customizeProperty={contactEmail:""},this.placeholderText=this.userInfo.customizeProperty.contactEmail)):this.addToast({content:"更新使用者資料失敗",timer:2e3})}).catch(t=>{throw new Error(t)})}}},V={class:"container pt-20 mx-auto"},z={class:"col-7 d-flex flex-column flex-lg-row align-items-center justify-content-center mx-auto mb-14"},D=["src"],B={class:"d-flex flex-column justify-content-center align-items-center align-items-lg-start"},L=e("div",{class:"d-flex flex-column flex-lg-row align-items-center align-items-lg-baseline"},[e("h1",{class:"fs-3 text-primary mb-0 mb-lg-20 me-0 me-lg-2"},"個人資料"),e("p",{class:"fs-5 text-primary-light mb-5 mb-lg-0"},"Personal Information")],-1),P=e("p",{class:"mb-0"},"請上傳 2MB 以內的 JPEG 或 PNG 檔",-1),C={class:"container col-11 col-lg-6 mx-auto"},A={class:"col-12 col-lg-10 mb-9 mx-auto"},S=e("label",{for:"addressee",class:"form-label fw-medium text-gray-500"}," 註冊信箱 ",-1),O=["placeholder"],R=e("p",{class:"fs-6 text-gray-500 mt-1"},"此為您的登入帳號",-1),F={class:"col-12 col-lg-10 mb-6 mb-lg-11 mx-auto"},J=e("label",{for:"contact-email",class:"form-label fw-medium"}," 聯絡信箱 ",-1),N=["placeholder"],G={class:"col-12 col-lg-10 mb-17 mx-auto"},j={class:"row gy-3"},W={class:"col-12 col-lg-6 mb-6"},Y=e("label",{for:"start-time",class:"form-label lh-md fw-medium"}," 生日 ",-1),Q={class:"col-12 col-lg-6"},X=e("label",{for:"gender",class:"form-label fw-medium lh-md"},"性別",-1),Z=e("option",{selected:"",disabled:"",value:"choose"},"請選擇",-1),q=e("option",{value:"male"},"男性",-1),H=e("option",{value:"female"},"女性",-1),K=[Z,q,H],ee={class:"col-12 col-lg-6 mb-25 mx-auto"};function te(o,t,c,n,s,a){const f=x("UpLoad");return h(),p("main",null,[e("section",V,[e("div",z,[e("img",{src:s.userInfo.userAvatarImage,id:"userAvatarImage",class:"rounded-circle img-fluid object-fit-cover d-block me-0 me-lg-14 mb-6 mb-lg-0",style:{width:"180px",height:"180px"},alt:"會員自行上傳的圖像"},null,8,D),e("div",B,[L,e("button",{type:"button",class:"btn border-0 fs-4 fs-lg-5 fw-medium text-primary ps-0 pe-1 py-0 mb-2",onClick:t[0]||(t[0]=d((...r)=>a.userUploadImage&&a.userUploadImage(...r),["prevent"]))},[_(" 上傳圖片 "),e("span",null,[b(f,{class:"upload-hover"})])]),P])])]),e("section",C,[e("div",A,[S,e("input",{class:"form-control fs-6 border-primary-light py-2",id:"addressee",placeholder:s.userMail,disabled:""},null,8,O),R]),e("div",F,[J,i(e("input",{class:"form-control fs-6 border-primary-light text-gray-500 py-2",id:"contact-email","onUpdate:modelValue":t[1]||(t[1]=r=>s.userInfo.customizeProperty.contactEmail=r),placeholder:s.placeholderText},null,8,N),[[m,s.userInfo.customizeProperty.contactEmail]])]),e("div",G,[e("div",j,[e("div",W,[Y,i(e("input",{type:"date",class:"form-control border-primary-light text-gray-500",id:"birth","onUpdate:modelValue":t[2]||(t[2]=r=>s.userInfo.userBirthday=r)},null,512),[[m,s.userInfo.userBirthday]])]),e("div",Q,[X,i(e("select",{class:"form-select border-primary-light fs-6 text-gray-500 py-2","aria-label":"male-or-female",id:"ID-gender","onUpdate:modelValue":t[3]||(t[3]=r=>s.userInfo.userGender=r)},K,512),[[g,s.userInfo.userGender]])])])]),e("div",ee,[e("button",{type:"submit",class:"btn btn-primary w-100",onClick:t[4]||(t[4]=d((...r)=>a.updateUserProfile&&a.updateUserProfile(...r),["prevent"]))}," 修改並儲存 ")])])])}const re=u($,[["render",te]]);export{re as default};

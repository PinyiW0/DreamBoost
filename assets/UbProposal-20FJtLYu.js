import{m as g}from"./mixinFullScreenLoading-9dNja2ki.js";import{m as C}from"./mixinSwalToast-ASTaHnD6.js";import{_ as c,o as e,c as o,a as t,S as D,s as u,t as d,b,F as m,r as p,l as v,d as w,i as y}from"./index-yuxx1_q5.js";const I={},k={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 32 32"},x=t("path",{fill:"currentColor","fill-rule":"evenodd",d:"M24.94 7.057c.52.52.52 1.364 0 1.885l-16 16a1.333 1.333 0 1 1-1.885-1.886l16-16c.52-.52 1.364-.52 1.885 0Z","clip-rule":"evenodd"},null,-1),S=t("path",{fill:"currentColor","fill-rule":"evenodd",d:"M7.055 7.057a1.332 1.332 0 0 1 1.885 0l16 16a1.333 1.333 0 0 1-1.885 1.885l-16-16a1.333 1.333 0 0 1 0-1.885Z","clip-rule":"evenodd"},null,-1),T=[x,S];function M(r,s){return e(),o("svg",k,T)}const $=c(I,[["render",M]]),E={},R={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},U=t("path",{fill:"currentColor","fill-rule":"evenodd",d:"M18.707 5.293a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414 0l-6-6a1 1 0 0 1 1.414-1.414L12 10.586l5.293-5.293a1 1 0 0 1 1.414 0Zm0 7a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414 0l-6-6a1 1 0 1 1 1.414-1.414L12 17.586l5.293-5.293a1 1 0 0 1 1.414 0Z","clip-rule":"evenodd"},null,-1),B=[U];function L(r,s){return e(),o("svg",R,B)}const V=c(E,[["render",L]]);var O={VITE_URL:"https://api.dreamboost.shop",VITE_WEIKEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3RlbWFpbEBnbWFpbC5jb20iLCJ1c2VySUQiOiIzYTU4MjBhZi1iN2JlLTRkODMtOWM2My1kNmY1MWI2YmExMDEiLCJpYXQiOjE3MDg5Mzk5MDcsImV4cCI6MTcxMTUzMTkwN30.BbIXGVkQOU2HqsiCg6UcwFZx-kBd7kdOP24kUD21c1M",BASE_URL:"/DreamBoost/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:P}=O,F={props:["proposalData"],data(){return{collapseInstance:"",isShown:"",defineClass:[]}},methods:{initCollapse(){this.collapseInstance=new this.$bs.Collapse(this.$refs.collapseContent,{toggle:!1}),this.$refs.collapseContent.addEventListener("show.bs.collapse",()=>{this.isShown=!0}),this.$refs.collapseContent.addEventListener("hide.bs.collapse",()=>{this.isShown=!1})},toggle(){this.collapseInstance.toggle()},hide(){this.collapseInstance.hide()},setStatusCss(){this.proposalData.proposalStatus==="active"&&!this.isActive?this.defineClass=["bg-gray-600","text-dark-pr"]:this.defineClass=["bg-primary","text-white"]},submitDoubleCheck(){D.fire({title:"確定要送出提案嗎？",icon:"question",allowOutsideClick:!1,showCancelButton:!0,buttonsStyling:!0,confirmButtonText:"確認",cancelButtonText:"取消"}).then(r=>{r.isConfirmed&&this.submitToReview(),r.isDismissed}).catch(()=>{this.addToast({content:"提案送交審核過程出現錯誤",style:"error"})})},submitToReview(){const r=document.cookie.replace(/(?:(?:^|.*;\s*)db\s*=\s*([^;]*).*$)|^.*$/,"$1");this.showFullScreenLoading({canCancel:!1}),this.$http.post(`${P}/dreamboost/proposal/admin/changeToReview`,{proposalID:this.proposalData.proposalID},{headers:{Authorization:r}}).then(()=>{this.hideFullScreenLoading(),this.addToast({content:"提案已送交審核"}),this.$emit("updateProposalRecordData")}).catch(s=>{console.log(s),this.hideFullScreenLoading(),this.addToast({content:"送交提案過程出現錯誤",style:"error"})})}},components:{DoubleAngleDownIcon:V,CloseButtonIcon:$},computed:{isActive(){return Date.parse(this.proposalData.proposalEndTime)>new Date().getTime()}},mounted(){this.initCollapse(),this.setStatusCss()},mixins:[C,g]},j={class:"l-cardContainer"},J={class:"l-gridCard text-center"},N={key:0},z={key:1},A={key:2},Y={key:3},Z=t("div",{class:"l-gridCard--centerChild l-gridCard__titleName border-top border-bottom border-primary bg-bgc-paper"}," 專案名稱",-1),W={class:"l-gridCard__contentName border-bottom border-primary text-start"},Q={class:"py-4 px-4 d-flex align-items-center"},X=t("img",{src:"https://picsum.photos/id/684/600/400",alt:"",width:"120",height:"90"},null,-1),G={class:"mb-0 ms-3"},q=t("div",{class:"l-gridCard--centerChild l-gridCard__titleTarget border-top border-bottom border-primary bg-bgc-paper"}," 目標金額",-1),H={class:"l-gridCard--centerChild l-gridCard__contentTarget border-bottom border-primary"},K=t("div",{class:"l-gridCard--centerChild l-gridCard__titleCreatedDate border-top border-bottom border-primary bg-bgc-paper"}," 創建日期",-1),tt={class:"l-gridCard--centerChild l-gridCard__contentCreatedDate border-bottom border-primary"},et=t("div",{class:"l-gridCard--centerChild l-gridCard__titleSubmitDate border-top border-bottom border-primary bg-bgc-paper"}," 提交日期",-1),ot={class:"l-gridCard--centerChild l-gridCard__contentSubmitDate border-bottom border-primary"},st=t("div",{class:"l-gridCard--centerChild l-gridCard__titleUpdateDate border-top border-bottom border-primary bg-bgc-paper"}," 上次修改日期",-1),rt={class:"l-gridCard--centerChild l-gridCard__contentUpdateDate border-bottom border-primary"},at={class:"l-gridCard--centerChild l-gridCard__btnDeleteProposal"},it={type:"button",class:"btn btn-light rounded-0 p-0 h-100 w-100 l-btn-close border border-primary border-bottom-"},lt={class:"l-gridCard--centerChild l-gridCard__btnViewDetail"},nt={ref:"collapseContent",class:"collapse"},dt={class:"row justify-content-end pt-3"},ct=t("div",{class:"col-2"},[t("button",{class:"w-100 btn btn-outline-primary px-0 l-btn-edit"},"編輯")],-1),pt={class:"col-2"},ht={key:1,class:"col-4"},_t=t("button",{class:"w-100 btn btn-primary px-0"},"查看詳情",-1),bt=[_t];function mt(r,s,a,f,n,i){const h=p("CloseButtonIcon"),_=p("DoubleAngleDownIcon");return e(),o("div",j,[t("div",J,[t("div",{class:u(["l-gridCard--centerChild l-gridCard__status px-5 d-flex align-items-center justify-content-center border border-primary",n.defineClass])},[a.proposalData.proposalStatus==="draft"?(e(),o("span",N,"創建中專案")):a.proposalData.proposalStatus==="review"?(e(),o("span",z,"審核中專案")):a.proposalData.proposalStatus==="active"&&i.isActive?(e(),o("span",A,"進行中專案")):(e(),o("span",Y,"已結束專案"))],2),Z,t("div",W,[t("div",Q,[X,t("p",G,d(a.proposalData.proposalTitle),1)])]),q,t("div",H,d(a.proposalData.proposalTargetMoney),1),K,t("div",tt,d(a.proposalData.proposalStartTime.split("-").join(".")),1),et,t("div",ot,d(a.proposalData.proposalStartTime.split("-").join(".")),1),st,t("div",rt,d(a.proposalData.proposalStartTime.split("-").join(".")),1),t("div",at,[t("button",it,[b(h)])]),t("div",lt,[t("button",{type:"button",class:u(["btn p-0 rounded-0 bg-primary-light w-100 h-100 l-btn-detail border border-primary border-top-0",{active:n.isShown}]),onClick:s[0]||(s[0]=(...l)=>i.toggle&&i.toggle(...l))},[b(_,{width:"24",height:"24"})],2)])]),t("div",nt,[t("div",dt,[a.proposalData.proposalStatus==="draft"?(e(),o(m,{key:0},[ct,t("div",pt,[t("button",{class:"w-100 btn btn-primary px-0",onClick:s[1]||(s[1]=(...l)=>i.submitDoubleCheck&&i.submitDoubleCheck(...l))},"送出提案")])],64)):(e(),o("div",ht,bt))])],512)])}const ut=c(F,[["render",mt]]),gt={},Ct={xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",fill:"none",viewBox:"0 0 25 24"},vt=v('<g clip-path="url(#a)"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21.5 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3.5 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4a2 2 0 0 0 1-1.73Z"></path><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m3.773 6.96 8.73 5.05 8.73-5.05M12.5 22.08V12"></path></g><defs><clipPath id="a"><path fill="currentColor" d="M.5 0h24v24H.5z"></path></clipPath></defs>',2),ft=[vt];function Dt(r,s){return e(),o("svg",Ct,ft)}const wt=c(gt,[["render",Dt]]);var yt={VITE_URL:"https://api.dreamboost.shop",VITE_WEIKEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3RlbWFpbEBnbWFpbC5jb20iLCJ1c2VySUQiOiIzYTU4MjBhZi1iN2JlLTRkODMtOWM2My1kNmY1MWI2YmExMDEiLCJpYXQiOjE3MDg5Mzk5MDcsImV4cCI6MTcxMTUzMTkwN30.BbIXGVkQOU2HqsiCg6UcwFZx-kBd7kdOP24kUD21c1M",BASE_URL:"/DreamBoost/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:It}=yt,kt={data(){return{userProposals:""}},methods:{getUserProposals(){const r=document.cookie.replace(/(?:(?:^|.*;\s*)db\s*=\s*([^;]*).*$)|^.*$/,"$1");this.showFullScreenLoading({canCancel:!1}),this.$http.get(`${It}/dreamboost/proposal/normal/proposals`,{headers:{Authorization:r}}).then(s=>{this.hideFullScreenLoading(),this.userProposals=Object.values(s.data.data.result)}).catch(()=>{this.hideFullScreenLoading(),this.addToast({content:"取得提案失敗，請重新整理再次嘗試。",style:"error"})})}},components:{ProposalRecordCard:ut,OutlineCubeIcon:wt},mounted(){this.getUserProposals()},mixins:[g,C]},xt={class:"mt-17 container"},St=t("div",{class:"text-center"},[t("h3",{class:"text-primary mb-1 text-center"},"提案紀錄"),t("p",{class:"text-primary-light"},"Proposal Record")],-1),Tt=v('<div class="row g-0 mt-9"><div class="col-3"><p class="text-gray-600 mb-1">專案狀態</p><select class="form-select border border-primary-light text-gray-500" aria-label="Default select"><option value="all">全部專案</option><option value="draft">草稿</option><option value="review">審核中</option><option value="active">已上架</option></select></div></div>',1),Mt={class:"row mt-13"},$t={class:"col-12"},Et={class:"l-proposalCardGapY"},Rt={class:"d-flex m-auto btn btn-primary px-13 mt-20 mb-30 align-items-center"},Ut=t("span",{class:"lh-1"},"載入更多",-1),Bt={key:1};function Lt(r,s,a,f,n,i){const h=p("ProposalRecordCard"),_=p("OutlineCubeIcon");return e(),o("section",xt,[St,n.userProposals?(e(),o(m,{key:0},[Tt,t("div",Mt,[t("div",$t,[t("div",Et,[(e(!0),o(m,null,w(n.userProposals,l=>(e(),y(h,{key:l.proposalID,"proposal-data":l,onUpdateProposalRecordData:i.getUserProposals},null,8,["proposal-data","onUpdateProposalRecordData"]))),128))]),t("button",Rt,[Ut,b(_,{width:"24",height:"24",class:"ms-2"})])])])],64)):(e(),o("p",Bt,"目前沒有任何提案"))])}const Ft=c(kt,[["render",Lt]]);export{Ft as default};

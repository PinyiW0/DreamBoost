import{L as b,D as k}from"./DashboardFooter-v4JH287K.js";import{L as f}from"./AdministratorIcon-jPJurq8A.js";import{m as x}from"./mixinFullScreenLoading-9dNja2ki.js";import{m as v}from"./mixinSwalToast-9ViEWAoD.js";import{_ as y,S as l,c as L,a as t,b as e,w as n,F as I,A as T,r as i,o as C,e as c,p as w,j as S}from"./index-QbPLaDgz.js";var B={VITE_URL:"https://api.dreamboost.shop",VITE_WEIKEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3RlbWFpbEBnbWFpbC5jb20iLCJ1c2VySUQiOiIzYTU4MjBhZi1iN2JlLTRkODMtOWM2My1kNmY1MWI2YmExMDEiLCJpYXQiOjE3MDg5Mzk5MDcsImV4cCI6MTcxMTUzMTkwN30.BbIXGVkQOU2HqsiCg6UcwFZx-kBd7kdOP24kUD21c1M",BASE_URL:"/DreamBoost/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:D}=B,V={data(){return{tokenChecked:!1}},methods:{checkToken(){this.showFullScreenLoading({canCancel:!1,opacity:.8});const o=document.cookie.replace(/(?:(?:^|.*;\s*)dreamboostAdminToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.post(`${D}/dreamboost/administrator/checktoken`,null,{headers:{Authorization:o}}).then(()=>{this.hideFullScreenLoading(),this.addToast({content:"登入驗證：成功"}),this.tokenChecked=!0,this.$http.defaults.headers.common.Authorization=o}).catch(()=>{this.hideFullScreenLoading(),l.fire({title:"請正確登入再訪問後台頁面",text:"回到登入頁面",icon:"error",allowOutsideClick:!1,timer:3e3,timerProgressBar:!0,confirmButtonText:"OK"}).then(s=>{s.dismiss===l.DismissReason.timer&&this.$router.push("/admin/login"),s.isConfirmed&&this.$router.push("/admin/login")})})},logout(){l.fire({title:"確定要登出嗎？",icon:"question",allowOutsideClick:!1,showCancelButton:!0,buttonsStyling:!0,confirmButtonText:"確認",cancelButtonText:"取消"}).then(o=>{o.isConfirmed&&(document.cookie="dreamboostAdminToken=;expires=;",this.addToast({content:"登出成功"}),this.$router.push("/admin/login")),o.isDismissed}).catch(()=>{this.addToast({content:"登出過程出現錯誤",style:"error"})})}},components:{LogoIcon:b,LogoAvatar:f,DashboardFooter:k},mixins:[x,v],mounted(){this.checkToken()}},d=o=>(w("data-v-499fecca"),o=o(),S(),o),M={class:"sticky-top"},R={class:"navbar navbar-expand-sm border-bottom border-5 border-dark-pr bg-gray-800"},E={class:"container-fluid"},F=d(()=>t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbar-toggle","aria-controls":"navbar-toggle","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1)),N={class:"collapse navbar-collapse",id:"navbar-toggle"},O={class:"navbar-nav ms-auto mb-0 align-items-sm-center"},A={class:"nav-item flex-shrink-0 d-none d-sm-flex align-items-center"},U=d(()=>t("span",{class:"ms-4 me-2 mb-0 text-white fs-5"},"管理員，您好",-1)),$={class:"nav-item"},J={class:"bg-gray-800"},j={class:"bg-white bg-opacity-25",style:{"--bs-bg-opacity":".2"}},z={class:"mb-0 list-unstyled d-flex px-2 justify-content-around justify-content-lg-center py-4 l-ListGap"},W={class:"flex-grow-1"};function Y(o,s,G,P,m,r){const p=i("LogoIcon"),a=i("RouterLink"),h=i("LogoAvatar"),u=i("RouterView"),_=i("DashboardFooter");return m.tokenChecked?(C(),L(I,{key:0},[t("div",M,[t("nav",R,[t("div",E,[e(a,{to:"/admin/home/manageaccount",class:"p-0 d-block"},{default:n(()=>[e(p,{style:{height:"72px"}})]),_:1}),F,t("div",N,[t("ul",O,[t("li",A,[e(h,{style:{height:"45px"}}),U]),t("li",$,[t("button",{class:"l-logout btn px-4 py-2 text-white",onClick:s[0]||(s[0]=(...g)=>r.logout&&r.logout(...g))},"登出")])])])])]),t("div",J,[t("div",j,[t("ul",z,[t("li",null,[e(a,{class:"py-2 d-block px-1 px-sm-4 px-lg-8 l-NavLink",to:"/admin/home/manageaccount"},{default:n(()=>[c("管理帳號 ")]),_:1})]),t("li",null,[e(a,{class:"py-2 d-block px-1 px-sm-4 px-lg-8 l-NavLink",to:"/admin/home/reviewproposals"},{default:n(()=>[c("方案審核 ")]),_:1})]),t("li",null,[e(a,{class:"py-2 d-block px-1 px-sm-4 px-lg-8 l-NavLink",to:"/admin/home/salesdata"},{default:n(()=>[c("銷售數據 ")]),_:1})]),t("li",null,[e(a,{class:"py-2 d-block px-1 px-sm-4 px-lg-8 l-NavLink",to:"/admin/home/updatebanner"},{default:n(()=>[c("更換BN ")]),_:1})])])])])]),t("div",W,[e(u)]),e(_)],64)):T("",!0)}const K=y(V,[["render",Y],["__scopeId","data-v-499fecca"]]);export{K as default};

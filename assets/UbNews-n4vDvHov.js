import{_ as d,o as t,c as a,a as e,q as b,t as r,F as m,r as f,e as w,b as x,j as I,d as p}from"./index-2e5bzb_o.js";import{m as y}from"./mixinFullScreenLoading-9dNja2ki.js";import{m as $}from"./mixinSwalToast-BK7EWvli.js";const M={},k={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},v=e("path",{d:"M246.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 402.7 361.4 265.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-160 160zm160-352l-160 160c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 210.7 361.4 73.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3z",fill:"currentColor"},null,-1),D=[v];function S(o,s){return t(),a("svg",k,D)}const U=d(M,[["render",S]]),C={props:["messageData"],data(){return{collapseInstance:"",isShown:!1}},methods:{initCollapse(){this.collapseInstance=new this.$bs.Collapse(this.$refs.collapseArea,{toggle:!1}),this.$refs.collapseArea.addEventListener("show.bs.collapse",()=>{this.isShown=!0}),this.$refs.collapseArea.addEventListener("hide.bs.collapse",()=>{this.isShown=!1})},hide(){this.collapseInstance.hide()},show(){this.collapseInstance.show()},toggle(){this.collapseInstance.toggle()}},mounted(){this.initCollapse()}},L={class:"accordion-item border-0 border-bottom border-primary-light rounded-0"},A={class:"accordion-header"},E={ref:"collapseArea",class:"accordion-collapse collapse","data-bs-parent":"#messageAccordion"},T={class:"accordion-body"},V={class:"fs-6 text-gray-500 mt-6 mb-0"};function B(o,s,n,h,i,c){return t(),a("div",L,[e("h2",A,[e("button",{class:b(["accordion-button bg-transparent text-primary shadow-none",{collapsed:!i.isShown}]),type:"button","data-bs-toggle":"collapse",onClick:s[0]||(s[0]=(...l)=>c.toggle&&c.toggle(...l))},[e("span",null,r(n.messageData.messageTitle),1)],2)]),e("div",E,[e("div",T,[e("span",null,r(n.messageData.messageContent),1),e("p",V,r(new Date(n.messageData.messageTime)),1)])],512)])}const F=d(C,[["render",B],["__scopeId","data-v-29920b8d"]]);var O={VITE_URL:"https://api-dreamboost.vercel.app",VITE_WEIKEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3RlbWFpbEBnbWFpbC5jb20iLCJ1c2VySUQiOiIzYTU4MjBhZi1iN2JlLTRkODMtOWM2My1kNmY1MWI2YmExMDEiLCJpYXQiOjE3MDg5Mzk5MDcsImV4cCI6MTcxMTUzMTkwN30.BbIXGVkQOU2HqsiCg6UcwFZx-kBd7kdOP24kUD21c1M",BASE_URL:"/DreamBoost/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:N}=O,R={data(){return{apiUserMessages:""}},computed:{messagesSorted(){return this.apiUserMessages.slice().sort((o,s)=>s.messageTime-o.messageTime)}},methods:{getUserMessages(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)db\s*=\s*([^;]*).*$)|^.*$/,"$1");this.showFullScreenLoading({canCancel:!1}),this.$http.get(`${N}/dreamboost/message/normal/messages`,{headers:{Authorization:o}}).then(s=>{this.apiUserMessages=Object.values(s.data.data.result),this.hideFullScreenLoading()}).catch(()=>{this.hideFullScreenLoading()})}},components:{AnglesDown:U,AccordionItem:F},mounted(){this.getUserMessages()},mixins:[$,y]},z={class:"container"},J={class:"rounded-3 py-14 px-20 my-20 shadow"},j=e("div",{class:"d-flex flex-column mb-7"},[e("h1",{class:"fs-3 text-primary mb-0"},"最新通知"),e("p",{class:"fs-6 text-primary-light mb-0"},"News for you")],-1),W={class:"accordion p-4 pb-11 border border-primary-light rounded-3",id:"messageAccordion"},Y={class:"d-flex flex-column mt-5"},Q={type:"button",class:"btn border-0 angle-down"},X={class:"d-flex flex-column align-items-center fs-5 fw-blod"},Z={key:1};function q(o,s,n,h,i,c){const l=p("AccordionItem"),_=p("AnglesDown");return t(),a("main",null,[e("section",z,[e("div",J,[j,i.apiUserMessages?(t(),a(m,{key:0},[e("div",W,[(t(!0),a(m,null,f(c.messagesSorted,(g,u)=>(t(),I(l,{key:`${u}-AccordionList`,"message-data":g},null,8,["message-data"]))),128))]),e("div",Y,[e("button",Q,[e("span",X,[w("載入更多 "),x(_,{class:"mb-0",style:{width:"18px"}})])])])],64)):(t(),a("p",Z,"目前沒有任何通知"))])])])}const K=d(R,[["render",q]]);export{K as default};

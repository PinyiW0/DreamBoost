import{B as D,_ as k,o as m,c as g,a as e,k as c,n,F as _,q as I,m as S,b as y,e as l,r as h,j as C,s as w,C as F,d as N,t as b}from"./index-WtwVpptg.js";import{m as V}from"./memberStore-_ijtevef.js";import{L}from"./LaunchNav-bwT0lH7M.js";import{m as U,C as E}from"./CameraIcon-H97NrzfT.js";import{P}from"./PlusIcon-DlrYH1S8.js";var A={VITE_URL:"https://api.dreamboost.shop",VITE_WEIKEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3RlbWFpbEBnbWFpbC5jb20iLCJ1c2VySUQiOiIzYTU4MjBhZi1iN2JlLTRkODMtOWM2My1kNmY1MWI2YmExMDEiLCJpYXQiOjE3MDg5Mzk5MDcsImV4cCI6MTcxMTUzMTkwN30.BbIXGVkQOU2HqsiCg6UcwFZx-kBd7kdOP24kUD21c1M",BASE_URL:"/DreamBoost/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:f}=A;function u(){return sessionStorage.getItem("launchID")}const T=D("feedbackStore",{state:()=>({feedbackSet:{}}),actions:{getFeedback(){this.$http.get(`${f}/dreamboost/proposal/admin/feedbacks?proposalID=${u()}`).then(s=>{console.log(s),this.feedbackSet=s.data.data.result}).catch(s=>{console.log(s)})},postFeedback(s){this.$http.post(`${f}/dreamboost/proposal/normal/feedback?proposalID=${u()}`,s).then(t=>{console.log("success",t),this.getFeedback()}).catch(t=>{console.log(t)})},putFeedback(s,t){this.$http.put(`${f}/dreamboost/proposal/admin/feedback/${t}?proposalID=${u()}`,s).then(p=>{console.log(p),this.getFeedback()}).catch(p=>{console.log(p)})},deleteFeedback(s){this.$http.delete(`${f}/dreamboost/proposal/admin/feedback/${s}?proposalID=${u()}`).then(t=>{console.log(t),this.getFeedback()}).catch(t=>{console.log(t)})}}}),j={props:["tempData"],mixins:[U],data(){return{feedbackModal:null,copyTempData:{}}},methods:{saveFeedback(){this.$emit("feedback-handler",this.copyTempData),this.closeModal()},async imageHandler(s){this.copyTempData.feedbackImage=await this.uploadImage(s)},openModal(){this.feedbackModal.show()},closeModal(){this.feedbackModal.hide()}},mounted(){this.feedbackModal=new this.$bs.Modal(this.$refs.feedbackInfoModal,{backdrop:"static"})},watch:{tempData(){this.copyTempData=JSON.parse(JSON.stringify(this.tempData))}},components:{CameraIcon:E}},B={class:"modal fade",id:"staticBackdrop",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",ref:"feedbackInfoModal"},O={class:"modal-dialog modal-dialog-centered modal-xl"},z={class:"modal-content"},J={class:"modal-header flex-column row-gap-3 border-0"},R=e("h1",{class:"modal-title fs-3 text-primary fw-normal"},"編輯回饋資訊",-1),H={class:"modal-body mx-xl-7 px-lg-26 border-2 border-top border-primary-light text-gray-800"},Q={class:"row gy-4 mb-10"},W={class:"col-lg-6"},Y={class:"mb-4"},G=e("label",{for:"feedbackName",class:"form-label"},[l(" 回饋名稱 "),e("span",{class:"text-danger"}," * ")],-1),X={class:"mb-4"},Z=e("label",{for:"feedbackPrice",class:"form-label"},[l(" 回饋金額 "),e("span",{class:"text-danger"}," * ")],-1),q=e("p",{class:"fs-6 text-gray-400"},"最低金額為 $100 元",-1),K={class:"mb-4"},ee=e("label",{for:"abstract",class:"form-label"},[l(" 內容摘要 "),e("span",{class:"text-danger"}," * ")],-1),te={class:"mb-4"},oe=e("label",{for:"shippingArea",class:"form-label"},[l(" 寄送區域 "),e("span",{class:"text-danger"}," * ")],-1),se=e("option",{value:"",selected:"",disabled:""},"請選擇一個區域",-1),ae=e("option",{value:"台灣"},"台灣",-1),de=[se,ae],re=e("label",{for:"shippingTime",class:"form-label"},[l(" 預計寄送時間 "),e("span",{class:"text-danger"}," * ")],-1),le={class:"col-lg-6 d-flex flex-column"},ce={class:"mb-4"},ne=e("label",{for:"feedbackTitle",class:"form-label"},[l(" 回饋標題 "),e("span",{class:"text-danger"}," * ")],-1),ie=e("p",null,[l(" 回饋封面 "),e("span",{class:"text-danger"}," * ")],-1),pe=["src"],be=e("p",null," 請提供 JPEG 或 PNG 檔，圖片尺寸至少 1200x 800 PX (3:2)； 2MB 以內。 ",-1),me={for:"feedbackImg",class:"btn btn-primary d-flex justify-content-center gap-2 px-8 w-100 mb-3"},ge={style:{width:"20px","margin-top":"-2px"}},ye={class:"mt-auto"},he=e("label",{for:"feedbackQtyText",class:"form-label"},"回饋數量限制 ",-1),fe={class:"input-group border-primary-light"},ue=e("div",{class:"input-group-text gap-1 py-3 bg-transparent border-primary-light"},[e("input",{class:"form-check-input mt-0",type:"checkbox",id:"feedbackQty",value:""}),e("label",{for:"feedbackQty",class:"text-gray-400 lh-1"},"限量 ")],-1),_e=e("div",{class:"mb-10"},[e("label",{for:"feedbackTime",class:"form-label fw-medium me-2 mb-0"}," 限時回饋設定 "),e("input",{type:"checkbox",id:"feedbackTime",class:"form-check-input me-1",style:{"margin-top":"2px"}}),e("label",{for:"feedbackTime",class:"form-label mb-0"}," 啟用限時回饋 ")],-1),ke={class:"row gy-3 mb-13"},xe={class:"col-lg-6"},ve=e("label",{for:"startDate",class:"form-label mb-3"},"開始時間",-1),we=e("div",{class:"input-group"},[e("span",{class:"input-group-text py-3 border-primary-light bg-transparent",id:"startTime"},"開始時間 "),e("input",{type:"time",class:"form-control py-3 border-primary-light",id:"startTime"})],-1),Te={class:"col-lg-6"},Me=e("label",{for:"endDate",class:"form-label mb-3"},"結束日期",-1),$e=e("div",{class:"input-group"},[e("span",{class:"input-group-text py-3 border-primary-light bg-transparent",id:"endTime"},"結束時間"),e("input",{type:"time",class:"form-control py-3 border-primary-light",id:"endTime"})],-1),De={class:"row gy-3 justify-content-end"},Ie={class:"col-lg-3"},Se={class:"col-lg-3"};function Ce(s,t,p,x,a,d){const i=h("CameraIcon");return m(),g("div",B,[e("div",O,[e("div",z,[e("div",J,[e("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:t[0]||(t[0]=(...o)=>d.closeModal&&d.closeModal(...o))}),R]),e("div",H,[e("div",Q,[e("div",W,[e("div",Y,[G,c(e("input",{type:"text",id:"feedbackName",class:"form-control border-primary-light mb-1 py-3",placeholder:"100",min:"100","onUpdate:modelValue":t[1]||(t[1]=o=>a.copyTempData.feedbackName=o)},null,512),[[n,a.copyTempData.feedbackName]])]),e("div",X,[Z,c(e("input",{type:"number",id:"feedbackPrice",class:"form-control border-primary-light mb-1 py-3",placeholder:"100",min:"100","onUpdate:modelValue":t[2]||(t[2]=o=>a.copyTempData.feedbackSettingMoney=o)},null,512),[[n,a.copyTempData.feedbackSettingMoney]]),q]),e("div",K,[ee,c(e("textarea",{class:"form-control border-primary-light mb-0",id:"abstract",rows:"10",placeholder:"請在150字內","onUpdate:modelValue":t[3]||(t[3]=o=>a.copyTempData.feedbackArticle=o)},null,512),[[n,a.copyTempData.feedbackArticle]])]),a.copyTempData.customizeProperty?(m(),g(_,{key:0},[e("div",te,[oe,c(e("select",{name:"",id:"shippingArea",class:"form-select border-primary-light py-3","onUpdate:modelValue":t[4]||(t[4]=o=>a.copyTempData.customizeProperty.shippingArea=o)},de,512),[[I,a.copyTempData.customizeProperty.shippingArea]])]),e("div",null,[re,c(e("input",{type:"date",id:"shippingTime",class:"form-control border-primary-light py-3","onUpdate:modelValue":t[5]||(t[5]=o=>a.copyTempData.customizeProperty.shippingTime=o)},null,512),[[n,a.copyTempData.customizeProperty.shippingTime]])])],64)):S("",!0)]),e("div",le,[e("div",ce,[ne,c(e("input",{type:"text",id:"feedbackTitle",class:"form-control border-primary-light mb-1 py-3",placeholder:"100",min:"100","onUpdate:modelValue":t[6]||(t[6]=o=>a.copyTempData.feedbackTitle=o)},null,512),[[n,a.copyTempData.feedbackTitle]])]),ie,e("img",{src:a.copyTempData.feedbackImage||"https://fakeimg.pl/1200x800",class:"img-fluid mb-4",alt:""},null,8,pe),be,e("input",{type:"file",id:"feedbackImg",class:"d-none",onChange:t[7]||(t[7]=(...o)=>d.imageHandler&&d.imageHandler(...o))},null,32),e("label",me,[e("i",ge,[y(i)]),l(" 上傳封面照片 ")]),e("div",ye,[he,e("div",fe,[ue,c(e("input",{type:"text",id:"feedbackQtyText",class:"form-control py-3 border-primary-light","aria-label":"Text input with checkbox",placeholder:"0","onUpdate:modelValue":t[8]||(t[8]=o=>a.copyTempData.feedbackLimitAmount=o)},null,512),[[n,a.copyTempData.feedbackLimitAmount,void 0,{number:!0}]])])])])]),_e,e("div",ke,[e("div",xe,[ve,c(e("input",{type:"date",id:"startDate",class:"form-control border-primary-light py-3 mb-6","onUpdate:modelValue":t[9]||(t[9]=o=>a.copyTempData.feedbackStartTime=o)},null,512),[[n,a.copyTempData.feedbackStartTime]]),we]),e("div",Te,[Me,c(e("input",{type:"date",id:"endDate",class:"form-control border-primary-light py-3 mb-6","onUpdate:modelValue":t[10]||(t[10]=o=>a.copyTempData.feedbackEndTime=o)},null,512),[[n,a.copyTempData.feedbackEndTime]]),$e])]),e("div",De,[e("div",Ie,[e("button",{type:"button",class:"btn btn-gray-400 px-0 w-100",onClick:t[11]||(t[11]=(...o)=>d.closeModal&&d.closeModal(...o))}," 放棄修改 ")]),e("div",Se,[e("button",{type:"button",class:"btn btn-primary px-0 w-100",onClick:t[12]||(t[12]=(...o)=>d.saveFeedback&&d.saveFeedback(...o))}," 儲存回饋 ")])])])])])],512)}const Fe=k(j,[["render",Ce]]),Ne={data(){return{sortModal:null}},methods:{openModal(){this.sortModal.show()},closeModal(){this.sortModal.hide()}},mounted(){this.sortModal=new this.$bs.Modal(this.$refs.sortModal,{backdrop:"static"})}},Ve={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"sortModal"},Le={class:"modal-dialog modal-xl"},Ue={class:"modal-content overflow-hidden"},Ee={class:"modal-header flex-column row-gap-3 border-0"},Pe=e("h1",{class:"modal-title fs-3 text-primary fw-normal"},"自訂回饋排序",-1),Ae=e("ul",{class:"list-style-lg-inside text-lg-center"},[e("li",null," 限量或限時設定提高回饋項目吸引力，透過排序提升特定項目曝光度 "),e("li",null," 已滿額或到期的回饋會被置底至「已額滿項目」區塊，停止排序，不影響其他可贊助回饋的能見度 ")],-1),je={class:"modal-body mx-xl-7 py-lg-17 px-lg-26 border-2 border-top border-primary-light text-gray-800"},Be=C('<p class="mb-10 text-gray-600 fw-bold">可自訂排序</p><div class="text-nowrap overflow-auto"><table class="table mb-16 border-gray-700 text-center"><thead><tr><td>回饋金額</td><td>回饋敘述</td><td>數量限制</td><td>時間限制</td></tr><tr style="height:28px;"></tr></thead><tbody><tr><td class="p-0 border-0"><p class="mb-0 py-3 border border-end-0 border-gray-600 rounded-start-2 bg-bgc-paper"> $100 </p></td><td class="p-0 border-0"><p class="mb-0 py-3 border-top border-bottom border-gray-600 bg-bgc-paper"> 單純贊助，不需回饋 </p></td><td class="p-0 border-0"><p class="mb-0 py-3 border-top border-bottom border-gray-600 bg-bgc-paper"> 無 </p></td><td class="p-0 border-0"><p class="mb-0 py-3 border border-start-0 border-gray-600 rounded-end-2 bg-bgc-paper"> 無 </p></td></tr><tr style="height:12px;"></tr><tr><td class="p-0 border-0"><p class="mb-0 py-3 border border-end-0 border-gray-600 rounded-start-2 bg-bgc-paper"> $100 </p></td><td class="p-0 border-0"><p class="mb-0 py-3 border-top border-bottom border-gray-600 bg-bgc-paper"> 單純贊助，不需回饋 </p></td><td class="p-0 border-0"><p class="mb-0 py-3 border-top border-bottom border-gray-600 bg-bgc-paper"> 無 </p></td><td class="p-0 border-0"><p class="mb-0 py-3 border border-start-0 border-gray-600 rounded-end-2 bg-bgc-paper"> 無 </p></td></tr></tbody></table></div><p class="mb-10 text-gray-600 fw-bold">已額滿/到期回饋（不可排序）</p><div class="text-nowrap overflow-auto"><table class="table mb-17 border-gray-700 text-center"><thead><tr><td>回饋金額</td><td>回饋敘述</td><td>數量限制</td><td>時間限制</td></tr><tr style="height:28px;"></tr></thead><tbody><tr><td class="p-0 border-0"><p class="mb-0 py-3 border border-end-0 border-gray-600 rounded-start-2 bg-gray-400 opacity-75"> $100 </p></td><td class="p-0 border-0"><p class="mb-0 py-3 border-top border-bottom border-gray-600 bg-gray-400 opacity-75"> 單純贊助，不需回饋 </p></td><td class="p-0 border-0"><p class="mb-0 py-3 border-top border-bottom border-gray-600 bg-gray-400 opacity-75"> 無 </p></td><td class="p-0 border-0"><p class="mb-0 py-3 border border-start-0 border-gray-600 rounded-end-2 bg-gray-400 opacity-75"> 無 </p></td></tr><tr style="height:12px;"></tr><tr><td class="p-0 border-0"><p class="mb-0 py-3 border border-end-0 border-gray-600 rounded-start-2 bg-gray-400 opacity-75"> $100 </p></td><td class="p-0 border-0"><p class="mb-0 py-3 border-top border-bottom border-gray-600 bg-gray-400 opacity-75"> 單純贊助，不需回饋 </p></td><td class="p-0 border-0"><p class="mb-0 py-3 border-top border-bottom border-gray-600 bg-gray-400 opacity-75"> 無 </p></td><td class="p-0 border-0"><p class="mb-0 py-3 border border-start-0 border-gray-600 rounded-end-2 bg-gray-400 opacity-75"> 無 </p></td></tr></tbody></table></div>',4),Oe={class:"d-flex flex-column flex-lg-row justify-content-between row-gap-4"},ze=e("div",{class:"d-flex flex-column flex-lg-row gap-4"},[e("button",{type:"button",class:"btn btn-primary-light px-7 w-100"}," 依新增時間排序 "),e("button",{type:"button",class:"btn btn-primary-light px-7 w-100"}," 依金額高地排序 ")],-1),Je={class:"d-flex flex-column flex-lg-row gap-4"},Re=e("button",{type:"button",class:"btn btn-primary px-5"}," 儲存並關閉 ",-1);function He(s,t,p,x,a,d){return m(),g("div",Ve,[e("div",Le,[e("div",Ue,[e("div",Ee,[e("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:t[0]||(t[0]=(...i)=>d.closeModal&&d.closeModal(...i))}),Pe,Ae]),e("div",je,[Be,e("div",Oe,[ze,e("div",Je,[e("button",{type:"button",class:"btn btn-gray-600 px-4",onClick:t[1]||(t[1]=(...i)=>d.closeModal&&d.closeModal(...i))}," 放棄修改 "),Re])])])])])],512)}const Qe=k(Ne,[["render",He]]),We={data(){return{tempData:{},currentState:""}},methods:{...w(T,["getFeedback","postFeedback","putFeedback","deleteFeedback"]),...w(V,["postCheckToken"]),feedbackHandler(s){if(this.currentState==="add")this.postFeedback(s);else{const{feedbackID:t}=s;this.putFeedback(s,t)}},infoModal(s,t){this.currentState=s,this.currentState==="add"?this.tempData={feedbackName:"",feedbackTitle:"",feedbackImage:"",feedbackSettingMoney:100,feedbackArticle:"",feedbackLimitAmount:0,feedbackLimitTime:"temp",feedbackStartTime:"",feedbackEndTime:"",customizeProperty:{shippingArea:""}}:(console.log(t),this.tempData=t),this.$refs.feedbackInfo.openModal()},sortModal(){this.$refs.feedbackSort.openModal()},previousStep(){this.$router.go(-1)},nextStep(){this.$router.push("/launch/data")}},computed:{...F(T,["feedbackSet"])},async mounted(){await this.postCheckToken(),await this.getFeedback()},components:{LaunchNav:L,PlusIcon:P,FeedbackInfo:Fe,FeedbackSort:Qe}},Ye={class:"container"},Ge={class:"col-xl-8 mx-auto mb-8"},Xe=e("p",{class:"mb-7"}," 在這個區塊您將制定本次募資專案提供的回饋項目，回饋內容可以十分多元，但是必須清楚寫明回饋金額、內容說明、運費及寄送時間等必要資訊。 ",-1),Ze=e("p",{class:"lh-md"},[l(" 回饋列表 "),e("span",{class:"text-danger"}," * ")],-1),qe={class:"d-flex flex-column flex-md-row justify-content-between align-items-lg-center gap-7 mb-2"},Ke=e("ul",{class:"navbar-nav flex-row gap-2 gap-md-6 text-center"},[e("li",{class:"nav-item p-4 py-lg-6 px-md-10 px-lg-16 border-bottom border-2 fw-medium w-50 w-md-auto"}," 可贊助 "),e("li",{class:"nav-item p-4 py-lg-6 px-md-10 px-lg-16 border-bottom border-2 fw-medium w-50 w-md-auto"}," 已額滿/到期 ")],-1),et={class:"col-xl-9 mx-auto mb-27"},tt={class:"row gx-11 gy-7"},ot={class:"col-md-6 col-lg-7"},st={class:"card py-9 px-6 border-2 border-primary"},at={class:"d-flex flex-column flex-lg-row justify-content-between align-items-lg-center py-7 px-6 mb-6 bg-primary rounded-2 text-white"},dt={class:"card-title fs-5 mb-0"},rt={class:"d-flex align-items-end column-gap-1 mb-0 fs-5 lh-md"},lt={class:"fs-3 text-secondary-light fw-bold lterSpc-8 lh-1"},ct=["src","alt"],nt={class:"d-flex flex-column flex-lg-row justify-content-between align-items-lg-center mb-6"},it={class:"mb-0 fw-bold text-primary"},pt={class:"d-flex text-white mb-8"},bt={class:"mb-0 py-1 px-2 border-2 border-end border-secondary-light bg-primary lh-md"},mt={class:"text-secondary-light"},gt={class:"mb-0 py-1 px-2 bg-primary lh-md"},yt=e("span",{class:"text-secondary-light"},"0",-1),ht={class:"mb-8"},ft=e("h5",{class:"mb-3"},"【方案內容】",-1),ut=e("button",{type:"button",class:"btn btn-primary d-flex align-items-center justify-content-center column-gap-1 mb-4 px-14 fw-bold disabled"}," 贊助專案 ",-1),_t={class:"col-md-6 col-lg-5 align-self-end"},kt={class:"row gy-7"},xt={class:"col-12"},vt=["onClick"],wt=e("div",{class:"col-12"},[e("a",{href:"#",class:"btn btn-gray-600 w-100"}," 隱藏此回饋 ")],-1),Tt={class:"col-lg-6"},Mt=["onClick"],$t={class:"col-lg-6"},Dt=["onClick"],It={style:{width:"16px","margin-top":"-6px"}},St={class:"row justify-content-lg-end gy-7"},Ct={class:"col-md-6 col-lg-4"},Ft={class:"col-md-6 col-lg-4"};function Nt(s,t,p,x,a,d){const i=h("LaunchNav"),o=h("PlusIcon"),M=h("FeedbackInfo"),$=h("FeedbackSort");return m(),g(_,null,[y(i,{"current-page":"回饋設定"}),e("div",Ye,[e("div",Ge,[Xe,Ze,e("nav",qe,[Ke,e("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...r)=>d.sortModal&&d.sortModal(...r))}," 自訂排序回饋 ")])]),e("div",et,[(m(!0),g(_,null,N(s.feedbackSet,r=>(m(),g("div",{class:"p-7 p-lg-13 mb-9 border border-gray-700 rounded-3",key:r.feedbackID},[e("div",tt,[e("div",ot,[e("div",st,[e("div",at,[e("h3",dt,b(r.feedbackTitle),1),e("p",rt,[l(" 只要 "),e("span",lt," NT$ "+b(r.feedbackSettingMoney),1)])]),e("img",{class:"img-fluid mb-3 w-100 rounded-3 object-fit-cover",src:r.feedbackImage,alt:r.feedbackName},null,8,ct),e("div",nt,[e("div",null,[e("h4",it,b(r.feedbackName),1)])]),e("div",pt,[e("p",bt,[l(" 剩餘 "),e("span",mt,b(r.feedbackLimitAmount),1),l(" 份 ")]),e("p",gt,[l(" 已經被贊助 "),yt,l(" / "+b(r.feedbackLimitAmount)+" 次 ",1)])]),e("div",ht,[ft,l(" "+b(r.feedbackArticle),1)]),ut])]),e("div",_t,[e("div",kt,[e("div",xt,[e("button",{type:"button",class:"btn btn-primary w-100",onClick:v=>d.infoModal("edit",r)}," 編輯回饋資訊 ",8,vt)]),wt,e("div",Tt,[e("button",{type:"button",class:"btn btn-gray-400 px-0 w-100",onClick:v=>s.deleteFeedback(r.feedbackID)}," 刪除回饋 ",8,Mt)]),e("div",$t,[e("button",{type:"button",class:"btn btn-primary-light px-0 w-100",onClick:v=>s.postFeedback(r)}," 複製此回饋 ",8,Dt)])])])])]))),128)),e("button",{type:"button",class:"btn btn-outline-primary d-flex justify-content-center align-items-center gap-2 mb-13 w-100",onClick:t[1]||(t[1]=r=>d.infoModal("add"))},[l(" 新增一個回饋 "),e("i",It,[y(o)])]),e("div",St,[e("div",Ct,[e("button",{type:"button",class:"btn btn-primary-light w-100",onClick:t[2]||(t[2]=(...r)=>d.previousStep&&d.previousStep(...r))}," 上一步 ")]),e("div",Ft,[e("button",{type:"button",class:"btn btn-primary w-100",onClick:t[3]||(t[3]=(...r)=>d.nextStep&&d.nextStep(...r))}," 下一步 ")])])])]),y(M,{ref:"feedbackInfo","temp-data":a.tempData,onFeedbackHandler:d.feedbackHandler},null,8,["temp-data","onFeedbackHandler"]),y($,{ref:"feedbackSort"},null,512)],64)}const At=k(We,[["render",Nt]]);export{At as default};
